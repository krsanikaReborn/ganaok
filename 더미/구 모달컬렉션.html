<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.7.10/vue.js" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"
    integrity="sha512-odNmoc1XJy5x1TMVMdC7EMs3IVdItLPlCeL5vSUPN2llYKMJ2eByTTAIiiuqLg+GdNr9hF6z81p27DArRFKT7A=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<style>
    .txt_01 {
        font-size: 14px;
        font-weight: 500;
        line-height: 16.8px;
        text-align: left;
        width: 110px;
        margin: auto;
        text-overflow: ellipsis;
        white-space: nowrap;
        overflow: hidden;
    }

    .txt_02 {
        font-size: 10px;
        font-weight: 500;
        line-height: 15px;
        text-align: left;
        width: 110px;
        margin: auto;
        text-overflow: ellipsis;
        white-space: nowrap;
        overflow: hidden;
    }

    .txt_03 {
        font-size: 14px;
        font-weight: 400;
        text-overflow: ellipsis;
    }

    #myModal {
        width: 100vw;
        margin: auto;
    }

    .modalTtl {
        font-size: 16px;
        font-weight: 500;
        line-height: 24px;
        color: #121212;
    }

    .modal-content {
        border-radius: 16px;
        border: unset;
    }

    .modal-header .close {
        margin: -1rem;
    }

    .modal-header {
        padding: 21px 1rem;
        border-bottom: unset;
    }

    .modal-body {
        background: #F9F9F9;
    }

    .modal-dialog {
        max-width: 1000px;
        margin: 0;
    }

    .p_48 {
        padding: 48px 0;
    }

    .ic_ar {
        text-align: right;
        margin-top: -90px;
        margin-right: -10px;
    }

    .ic_bar {
        padding: 18px 30px 18px 0;
    }

    .modalTxt {
        font-size: 16px;
        font-weight: 700;
        line-height: 19px;
        color: #333;
    }

    .bc_F9F9F9 {
        background: #F9F9F9;
    }

    @media only screen and (max-width: 320px) {
        .txt_01 {
            font-size: 10px;
            width: 90px;
        }

        .txt_02 {
            width: 90px;
        }

        .m_fs_12 {
            font-size: 12px;
        }
    }
</style>

<div id="app">
    <div class="container-fluid">
        <div class="row pb_30 pt_24 m_auto">
            <div class="col fs_14 dp_f jc_b m_fs_12">
                <div>
                    <strong>COLLECTION</strong>
                    <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/Line 5.png" class="img-fluid mb_4 mr_8 ml_8">
                    <span class="c_828282">내가 찜한 작품</span>
                </div>
                <div>
                    <a class="">
                        <span class="c_828282">최신순</span>
                        <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/btn_down.png" class="img-fluid mb_2">
                    </a>
                </div>
            </div>
        </div>
        <template v-for="row, row_idx in c_collection">
            <div class="row pb_16 m_auto">
                <template v-for="item, idx in row" >
                    <div class="col-4 txt_c c_pointer" bdata-toggle="modal" bdata-target="#myModal" @click="f_read(item);">
                        <img :src=" item.image " alt="" class="img-fluid">
                        <div class="txt_01 pt_14 h_50">{{ item["작품 이름"] }}</div>
                        <div class="txt_02 c_828282 pt_2">{{ item["작가(관리툴에 등록된 리스트에서 선택 가능하도록)"] }}</div>
                    </div>
                </template>
            </div>
        </template>

        <!-- <div class="row pb_16 m_auto">
            <div class="col-4 txt_c c_pointer" data-toggle="modal" data-target="#myModal">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_01.png" class="img-fluid">
                <div class="txt_01 pt_14 h_50">100 Illustrator
                    <br>Line Second …
                </div>
                <div class="txt_02 c_828282 pt_2">삼백수</div>
            </div>
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_02.png" class="img-fluid">
                <div class="txt_01 pt_14 h_50">반짝반짝 작은별</div>
                <div class="txt_02 c_828282 pt_2">김철수, 삼백수, 삼다수…</div>
            </div>
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_03.png" class="img-fluid" width="110px">
                <div class="txt_01 pt_14 h_50">여름 어느날</div>
                <div class="txt_02 c_828282 pt_2">김철수</div>
            </div>
        </div>
        <div class="row pb_16 m_auto">
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_02.png" class="img-fluid">
                <div class="txt_01 pt_14 h_50">반짝반짝 작은별</div>
                <div class="txt_02 c_828282 pt_2">김철수, 삼백수, 삼다수…</div>
            </div>
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_01.png" class="img-fluid">
                <div class="txt_01 pt_14 h_50">100 Illustrator
                    <br>Line Second …
                </div>
                <div class="txt_02 c_828282 pt_2">삼백수</div>
            </div>
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_03.png" class="img-fluid" width="110px">
                <div class="txt_01 pt_14 h_50">여름 어느날</div>
                <div class="txt_02 c_828282 pt_2">김철수</div>
            </div>
        </div>
        <div class="row pb_16 m_auto">
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_02.png" class="img-fluid">
                <div class="txt_01 pt_14 h_50">반짝반짝 작은별</div>
                <div class="txt_02 c_828282 pt_2">김철수, 삼백수, 삼다수…</div>
            </div>
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_01.png" class="img-fluid">
                <div class="txt_01 pt_14 h_50">100 Illustrator
                    <br>Line Second …
                </div>
                <div class="txt_02 c_828282 pt_2">삼백수</div>
            </div>
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_03.png" class="img-fluid" width="110px">
                <div class="txt_01 pt_14 h_50">여름 어느날</div>
                <div class="txt_02 c_828282 pt_2">김철수</div>
            </div>
        </div>
        <div class="row pb_16 m_auto">
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_02.png" class="img-fluid">
                <div class="txt_01 pt_14 h_50">반짝반짝 작은별</div>
                <div class="txt_02 c_828282 pt_2">김철수, 삼백수, 삼다수…</div>
            </div>
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_01.png" class="img-fluid">
                <div class="txt_01 pt_14 h_50">100 Illustrator
                    <br>Line Second …
                </div>
                <div class="txt_02 c_828282 pt_2">삼백수</div>
            </div>
            <div class="col-4 txt_c">
                <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_03.png" class="img-fluid" width="110px">
                <div class="txt_01 pt_14 h_50">여름 어느날</div>
                <div class="txt_02 c_828282 pt_2">김철수</div>
            </div>
        </div> -->
    </div>
    
    
    <!-- 
        <div onclick="imgToggle()">
            <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_Inactive.png" id="img1">
            <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_Vector.png" id="img2" style="display: none;">
        </div> 
    -->
    
    
    <!-- The Modal -->
    <div class="modal fade"  id="myModal">
        <div class="modal-dialog" v-show=" Object.keys(read).length > 0 ">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <div class="modal-title m_auto modalTtl">100 Illustrator Line Second …</div>
                    <button type="button" class="close" data-dismiss="modal" @click="close">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class="p_48 txt_c">
                        <!-- <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/img_04.png" class="img-fluid" style="box-shadow: 2px 12px 24px 0px #16161640;"> -->
                        <img :src=" read.image " class="img-fluid" style="box-shadow: 2px 12px 24px 0px #16161640;">
                    </div>
                    <div class="ic_ar">
                        <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_ar.png"
                            class="img-fluid c_pointer">
                    </div>
                </div>
                <div>
                    <div class="txt_r ic_bar dp_f jc_e">
                        <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_share.png"
                            class="img-fluid pr_10 c_pointer">
                        <div onclick="imgToggle()">
                            <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_Inactive.png" id="img1"
                                class="img-fluid pr_10 c_pointer" width="30px">
                            <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_Vector.png" id="img2"
                                style="display: none;" class="img-fluid pr_10 c_pointer" width="30px">
                        </div>
                    </div>
                </div>
                <div class="p_18">
                    <div class="modalTxt">
                        {{ read["작품 이름"] }}
                    </div>
                    <div class="fs_14 mt_8 fw_500">
                        <span>{{ read["작가(관리툴에 등록된 리스트에서 선택 가능하도록)"] }}</span>
                        <img src="https://ganaart.s3.ap-northeast-2.amazonaws.com/Line 5.png"
                            class="img-fluid mb_4 mr_8 ml_8">
                        <span class="c_828282">1973~ 2099</span>
                    </div>
                    <div class="fs_14 fw_600 c_4F4F4F pt_20 pb_4">Note.</div>
                    <div class="bc_F9F9F9 p_8_12 fs_14 c_828282">
                        <div class="dp_f">
                            <div class="fw_600 w_50 mr_16">size</div>
                            <div class="fw_400">{{ read['작품 가로사이즈(cm)'] }} * {{ read['작품 세로 사이즈(cm)'] }}</div>
                        </div>
                        <div class="dp_f">
                            <div class="fw_600 w_50 mr_16">기법</div>
                            <div class="fw_400">{{ read['기법'] }}</div>
                        </div>
                        <div class="dp_f">
                            <div class="fw_600 w_50 mr_16">제작년도</div>
                            <div class="fw_400">{{ read['제작년도'] }}</div>
                        </div>
                    </div>
                    <div class="pt_24 txt_03" v-html=" read['작품 설명'] "></div>
                </div>
            </div>
        </div>
    </div>
</div>



<script>
    let cnt = 1;

    function imgToggle() {
        let img1 = document.getElementById("img1");
        let img = document.getElementById("img2");

        if (cnt % 2 == 1) {
            img1.src = "https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_Vector.png"
            img2.src = "https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_Inactive.png"
        } else {
            img1.src = "https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_Inactive.png"
            img2.src = "https://ganaart.s3.ap-northeast-2.amazonaws.com/ic_Vector.png"
        }
        cnt++;
    }

    $(() => {
        $('.preview-btm1').remove();
        $('div[data-id=tab_outer]').remove();
    })



    let app = new Vue({
        el : "#app",
        name : "app",
        data : {
            url : (location.hostname == "localhost" ? "https://preview-gana_test.olly.kr" : ""),
            key : "vvgb2n0wd3sociqjx1ubl49cdr10suw5",
            collection : [], // COLLECTION

            read : {},
        },

        methods : {
            get_collection () {
                const _this = this;
    
                let frm = new FormData();
                frm.append("KEY", _this.key);
                frm.append("F_IDX", 1306);
                frm.append("menu2_id", 26920);
                frm.append("imgsize", "110x110");
    
                axios.post(_this.url + "/api/form.list.php", frm)
                .then(r => {
                    let $json = r.data;

                    if (!$json.success) {
                        _this.collection = [];
                        console.error($json.msg);
                        return false;
                    }

                    _this.collection = $json.items;
                })
            },

            file_url (code) {
                return this.url + "/form/fileDown.php?s=&code=" + code
            },

            init () {
            },

            f_read (item) {
                this.read = item;
                $('#myModal').modal();
            },

            close () {
                const _this = this;
                
                $('#myModal').modal("hide");
                setTimeout(function () {
                    _this.read = {};
                }, 500);
            }
        },

        computed : {

            c_collection () {
                const _this = this;
                let items = JSON.parse(JSON.stringify(_this.collection));
                let ret = [];

                items.map((item, idx) => {
                    item.FB.map( (item2, idx2) => {
                        // console.log(item2);
                        let el_name = item2.el_name;
                        let el_value = item2.el_value;
                        let kind = item2.kind;

                        items[idx][el_name] = el_value;
                    });

                    $key = Math.floor(idx/3);
                    if (typeof ret[$key] == "undefined") ret[$key] = [];
                    ret[$key].push(items[idx]);
                })

                return ret;
            }
        },

        mounted () {
            const _this = this;
            
            _this.get_collection();

            _this.$nextTick(function () {
                _this.init();
            });
        },

        updated() {
            const _this = this;
            _this.$nextTick(function () {
                _this.init();
            });
        }

    })
</script>